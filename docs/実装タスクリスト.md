# 🎯 Birthday Voucher 実装タスクリスト

## 📋 概要
Birthday Voucherアプリの実装に必要なタスクを整理したリストです。  
要件定義書・開発ロードマップ・プロト設計メモの内容を基に、実装順序を考慮して作成しました。

---

## 🚀 実装タスク一覧

### 1. 環境構築フェーズ
- [x] **Firebase環境構築** ⏱️ **所要時間: 30分** ✅ **完了**
  - Firebase Consoleでプロジェクト作成
  - Firestore・Authentication・Hosting有効化
  - Firebase設定情報の取得

- [x] **ローカル開発環境構築** ⏱️ **所要時間: 1時間** ✅ **完了**
  - Vite + React + Firebase SDK環境構築
  - Tailwind CSS設定
  - 依存関係のインストール

- [x] **Firebase設定情報の取得と設定** ⏱️ **所要時間: 30分** ✅ **完了**
  - Firebase Consoleから設定情報を取得
  - `.env`ファイルに設定情報を保存
  - Firebase初期化コードを作成
  - `.gitignore`でセキュリティ確保

### 2. 認証・データベースフェーズ
- [x] **Firebase Authentication実装** ⏱️ **所要時間: 1時間** ✅ **完了**
  - 妻のみログイン可能な認証システム
  - ログイン画面の実装
  - 認証状態の管理
  - ルーティング設定（React Router）

- [x] **Firestoreデータベース設計とセキュリティルール設定** ⏱️ **所要時間: 30分** ✅ **完了**
  - `settings`・`purchases`コレクションの設計
  - セキュリティルール設定（妻のみアクセス可能）
  - データ構造の実装

### 3. UI実装フェーズ
- [x] **管理画面UI実装** ⏱️ **所要時間: 1.5時間** ✅ **完了**
  - 残高設定・更新機能
  - 購入履歴の閲覧・削除機能
  - 有効期限設定機能

- [x] **利用者画面UI実装** ⏱️ **所要時間: 2時間** ✅ **完了**
  - 残高表示（リアルタイム更新）
  - 購入内容登録フォーム
  - 購入履歴一覧表示

### 4. ビジネスロジックフェーズ
- [x] **残高計算ロジック実装** ⏱️ **所要時間: 1時間** ✅ **完了**
  - 購入登録時の自動残高減算
  - 残高が0以下になった場合の制御
  - 残高のリアルタイム更新

- [x] **有効期限管理機能実装** ⏱️ **所要時間: 30分** ✅ **完了**
  - 有効期限切れ時の登録フォーム無効化
  - 期限切れ状態の表示
  - 期限管理ロジック

### 5. PWA・最適化フェーズ
- [x] **PWA対応** ⏱️ **所要時間: 1.5時間** ✅ **完了**
  - Manifest.json設定（アプリアイコン・名前）
  - Service Worker実装（オフライン機能）
  - ホーム画面追加対応

- [x] **入力バリデーション実装** ⏱️ **所要時間: 30分** ✅ **完了**
  - 金額は整数のみ（小数不可）
  - メモは最大50文字制限
  - 必須項目のチェック

### 6. テスト・デプロイフェーズ
- [x] **動作テスト** ⏱️ **所要時間: 1時間** ✅ **完了**
  - 残高減算の動作確認
  - 有効期限切れ時の動作確認
  - Firestoreセキュリティルール確認
  - ログイン機能確認

- [ ] **Firebase Hostingでデプロイ** ⏱️ **所要時間: 30分** 🔄 **進行中**
  - 本番環境へのデプロイ
  - スマホでのPWAインストール確認
  - 初期データ登録テスト

---

## 📝 実装時の注意点

### 🔒 セキュリティ
- Firebase Authenticationで妻のみログイン可能
- Firestore Security Rulesでアクセス制限
- APIキーは`.env`で管理（リポジトリに含めない）

### 📱 PWA対応
- Androidスマートフォンでの動作を最優先
- オフライン時の基本機能（残高・履歴表示）を保持
- ホーム画面追加の案内を表示

### 💾 データ管理
- 年度ごとのデータ分離（`year`フィールド）
- 古い年度データは`archive`コレクションに移動
- 定期的なFirestoreバックアップを実施

---

## 🎯 完了基準

各タスクは以下の基準で完了とします：

- **環境構築**: Firebaseプロジェクトが作成され、ローカルでアプリが起動する
- **認証**: 妻のみログインでき、セキュリティルールが正常に動作する
- **UI**: 管理画面・利用者画面が要件通りに表示される
- **ロジック**: 残高計算・有効期限管理が正常に動作する
- **PWA**: スマホでホーム画面に追加でき、オフラインでも基本機能が使える
- **テスト**: 全機能が正常に動作し、セキュリティが確保されている
- **デプロイ**: 本番環境で動作し、実際に利用開始できる

---

## 📅 想定スケジュール（修正版）

- **環境構築**: 2時間（✅30分 + ✅1時間 + ✅30分）
- **認証・DB**: 1.5時間（✅1時間 + ✅30分）  
- **UI実装**: 3.5時間（🔄1.5時間 + 2時間）
- **ロジック**: 1.5時間（1時間 + 30分）
- **PWA・テスト**: 3時間（1.5時間 + 30分 + 1時間）
- **デプロイ**: 30分

**合計**: 約12時間（約1.5日間の作業時間）

## 📊 **現在の進捗状況**

- ✅ **完了**: Firebase環境構築、Firestore設定、ローカル開発環境構築、Firebase設定情報の取得と設定、Firebase Authentication実装、管理画面UI実装、利用者画面UI実装、残高計算ロジック、有効期限管理機能、PWA対応、入力バリデーション、動作テスト
- 🔄 **進行中**: Firebase Hostingでデプロイ
- ⏳ **待機中**: なし

---

## 🔄 今後の拡張予定

- 🔔 残高0円時のLINE通知機能
- 📊 月別・カテゴリー別の使用額グラフ
- 🧾 CSVエクスポート機能
- 🗓️ 自動年度更新処理
