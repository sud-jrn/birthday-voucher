rules_version='2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Settingsコレクション: 誰でも読める、認証済みユーザーのみ書ける
    match /settings/{settingId} {
      allow read: if true; // 誰でも読める
      allow write: if request.auth != null; // ログイン必須
    }
    
    // Purchasesコレクション: 誰でも読める・作成、認証済みユーザーのみ削除
    match /purchases/{purchaseId} {
      allow read: if true; // 誰でも読める
      allow create: if true; // 誰でも作成可能
      allow update, delete: if request.auth != null; // 削除・更新はログイン必須
    }
  }
}
